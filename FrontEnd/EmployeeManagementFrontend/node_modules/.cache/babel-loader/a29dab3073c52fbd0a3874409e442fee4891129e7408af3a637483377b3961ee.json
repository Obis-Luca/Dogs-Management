{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nasync function getAllUsers(setArray, setServerState) {\n  _s();\n  const token = localStorage.getItem(\"authToken\");\n  useEffect(() => {\n    fetch(\"http://localhost:5000/api\", {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(response => response.json()).then(data => {\n      const sorted = data.sort((a, b) => {\n        let x = a.Name.toLowerCase();\n        let y = b.Name.toLowerCase();\n        return x < y ? -1 : x > y ? 1 : 0;\n      });\n      setArray(sorted);\n    }).catch(err => {\n      setServerState(false);\n      console.log(err);\n    });\n  }, []);\n}\n_s(getAllUsers, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\nfunction deleted(id) {\n  const token = localStorage.getItem(\"authToken\");\n  fetch(`http://localhost:5000/delete/${id}`, {\n    method: \"DELETE\",\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(res => {\n    if (res.ok) alert(\"User successfully deleted\");else if (res.status === 403) alert(\"You do not have permission to do that\");\n  }).catch(err => {\n    alert(\"Cannot delete user! He has pets\");\n    return;\n  });\n}\nfunction paginate(array, currentPage, recPerPage) {\n  const lastIndex = currentPage * recPerPage;\n  const firstIndex = lastIndex - recPerPage;\n  const records = array.slice(firstIndex, lastIndex);\n  const nPage = Math.ceil(array.length / recPerPage);\n  const numbers = [...Array(nPage + 1).keys()].slice(1);\n  return {\n    records,\n    nPage,\n    numbers\n  };\n}\nconst logOut = (logout, history) => {\n  if (window.confirm(\"Are you sure you want to log out?\")) {\n    logout();\n    history(\"/\");\n  }\n};\nexport default {\n  getAllUsers,\n  deleted,\n  paginate,\n  logOut\n};","map":{"version":3,"names":["useEffect","getAllUsers","setArray","setServerState","_s","token","localStorage","getItem","fetch","headers","Authorization","then","response","json","data","sorted","sort","a","b","x","Name","toLowerCase","y","catch","err","console","log","deleted","id","method","res","ok","alert","status","paginate","array","currentPage","recPerPage","lastIndex","firstIndex","records","slice","nPage","Math","ceil","length","numbers","Array","keys","logOut","logout","history","window","confirm"],"sources":["D:/FMI/fmi_an2(SEM2)/MPP/FrontEnd/crud_react/REACT_CRUD/src/components/Home/homeUtils.js"],"sourcesContent":["import { useEffect } from \"react\";\r\n\r\nasync function getAllUsers(setArray, setServerState) {\r\n\tconst token = localStorage.getItem(\"authToken\");\r\n\tuseEffect(() => {\r\n\t\tfetch(\"http://localhost:5000/api\", {\r\n\t\t\theaders: { Authorization: `Bearer ${token}` },\r\n\t\t})\r\n\t\t\t.then((response) => response.json())\r\n\t\t\t.then((data) => {\r\n\t\t\t\tconst sorted = data.sort((a, b) => {\r\n\t\t\t\t\tlet x = a.Name.toLowerCase();\r\n\t\t\t\t\tlet y = b.Name.toLowerCase();\r\n\t\t\t\t\treturn x < y ? -1 : x > y ? 1 : 0;\r\n\t\t\t\t});\r\n\t\t\t\tsetArray(sorted);\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tsetServerState(false);\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\t}, []);\r\n}\r\n\r\nfunction deleted(id) {\r\n\tconst token = localStorage.getItem(\"authToken\");\r\n\r\n\tfetch(`http://localhost:5000/delete/${id}`, {\r\n\t\tmethod: \"DELETE\",\r\n\t\theaders: {\r\n\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t},\r\n\t})\r\n\t\t.then((res) => {\r\n\t\t\tif (res.ok) alert(\"User successfully deleted\");\r\n\t\t\telse if (res.status === 403) alert(\"You do not have permission to do that\");\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\talert(\"Cannot delete user! He has pets\");\r\n\t\t\treturn;\r\n\t\t});\r\n}\r\n\r\nfunction paginate(array, currentPage, recPerPage) {\r\n\tconst lastIndex = currentPage * recPerPage;\r\n\tconst firstIndex = lastIndex - recPerPage;\r\n\tconst records = array.slice(firstIndex, lastIndex);\r\n\tconst nPage = Math.ceil(array.length / recPerPage);\r\n\tconst numbers = [...Array(nPage + 1).keys()].slice(1);\r\n\r\n\treturn { records, nPage, numbers };\r\n}\r\n\r\nconst logOut = (logout, history) => {\r\n\tif (window.confirm(\"Are you sure you want to log out?\")) {\r\n\t\tlogout();\r\n\t\thistory(\"/\");\r\n\t}\r\n};\r\n\r\nexport default { getAllUsers, deleted, paginate, logOut };\r\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AAEjC,eAAeC,WAAWA,CAACC,QAAQ,EAAEC,cAAc,EAAE;EAAAC,EAAA;EACpD,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;EAC/CP,SAAS,CAAC,MAAM;IACfQ,KAAK,CAAC,2BAA2B,EAAE;MAClCC,OAAO,EAAE;QAAEC,aAAa,EAAG,UAASL,KAAM;MAAE;IAC7C,CAAC,CAAC,CACAM,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACnCF,IAAI,CAAEG,IAAI,IAAK;MACf,MAAMC,MAAM,GAAGD,IAAI,CAACE,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;QAClC,IAAIC,CAAC,GAAGF,CAAC,CAACG,IAAI,CAACC,WAAW,CAAC,CAAC;QAC5B,IAAIC,CAAC,GAAGJ,CAAC,CAACE,IAAI,CAACC,WAAW,CAAC,CAAC;QAC5B,OAAOF,CAAC,GAAGG,CAAC,GAAG,CAAC,CAAC,GAAGH,CAAC,GAAGG,CAAC,GAAG,CAAC,GAAG,CAAC;MAClC,CAAC,CAAC;MACFpB,QAAQ,CAACa,MAAM,CAAC;IACjB,CAAC,CAAC,CACDQ,KAAK,CAAEC,GAAG,IAAK;MACfrB,cAAc,CAAC,KAAK,CAAC;MACrBsB,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;IACjB,CAAC,CAAC;EACJ,CAAC,EAAE,EAAE,CAAC;AACP;AAACpB,EAAA,CApBcH,WAAW;AAsB1B,SAAS0B,OAAOA,CAACC,EAAE,EAAE;EACpB,MAAMvB,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;EAE/CC,KAAK,CAAE,gCAA+BoB,EAAG,EAAC,EAAE;IAC3CC,MAAM,EAAE,QAAQ;IAChBpB,OAAO,EAAE;MACRC,aAAa,EAAG,UAASL,KAAM,EAAC;MAChC,cAAc,EAAE;IACjB;EACD,CAAC,CAAC,CACAM,IAAI,CAAEmB,GAAG,IAAK;IACd,IAAIA,GAAG,CAACC,EAAE,EAAEC,KAAK,CAAC,2BAA2B,CAAC,CAAC,KAC1C,IAAIF,GAAG,CAACG,MAAM,KAAK,GAAG,EAAED,KAAK,CAAC,uCAAuC,CAAC;EAC5E,CAAC,CAAC,CACDT,KAAK,CAAEC,GAAG,IAAK;IACfQ,KAAK,CAAC,iCAAiC,CAAC;IACxC;EACD,CAAC,CAAC;AACJ;AAEA,SAASE,QAAQA,CAACC,KAAK,EAAEC,WAAW,EAAEC,UAAU,EAAE;EACjD,MAAMC,SAAS,GAAGF,WAAW,GAAGC,UAAU;EAC1C,MAAME,UAAU,GAAGD,SAAS,GAAGD,UAAU;EACzC,MAAMG,OAAO,GAAGL,KAAK,CAACM,KAAK,CAACF,UAAU,EAAED,SAAS,CAAC;EAClD,MAAMI,KAAK,GAAGC,IAAI,CAACC,IAAI,CAACT,KAAK,CAACU,MAAM,GAAGR,UAAU,CAAC;EAClD,MAAMS,OAAO,GAAG,CAAC,GAAGC,KAAK,CAACL,KAAK,GAAG,CAAC,CAAC,CAACM,IAAI,CAAC,CAAC,CAAC,CAACP,KAAK,CAAC,CAAC,CAAC;EAErD,OAAO;IAAED,OAAO;IAAEE,KAAK;IAAEI;EAAQ,CAAC;AACnC;AAEA,MAAMG,MAAM,GAAGA,CAACC,MAAM,EAAEC,OAAO,KAAK;EACnC,IAAIC,MAAM,CAACC,OAAO,CAAC,mCAAmC,CAAC,EAAE;IACxDH,MAAM,CAAC,CAAC;IACRC,OAAO,CAAC,GAAG,CAAC;EACb;AACD,CAAC;AAED,eAAe;EAAElD,WAAW;EAAE0B,OAAO;EAAEO,QAAQ;EAAEe;AAAO,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}