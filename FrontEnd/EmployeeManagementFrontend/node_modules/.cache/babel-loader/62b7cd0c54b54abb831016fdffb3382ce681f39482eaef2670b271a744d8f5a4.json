{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nimport axios from \"axios\";\nfunction createPerson(e, name, age, salary, password, setname, setage, setsalary, setPassword, setAuthToken, history) {\n  e.preventDefault();\n  if (name === \"\" || age === \"\" || salary === \"\" || parseInt(age) < 0 || parseInt(salary) < 0) {\n    alert(\"invalid input\");\n    setname(\"\");\n    setage(\"\");\n    setsalary(\"\");\n    setPassword(\"\");\n    window.location.reload();\n    return;\n  }\n  const newUser = {\n    name: name,\n    age: age,\n    salary: salary,\n    password: password\n  };\n  fetch(\"http://localhost:5000/auth\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(newUser)\n  }).then(async res => res.json()).then(data => {\n    setAuthToken(data.accessToken);\n    localStorage.setItem(\"authToken\", data.accessToken);\n    history(\"/home\");\n    window.location.reload();\n  }).catch(err => console.log(err));\n  history(\"/home\");\n}\nfunction getPetDetails(aid, setPet) {\n  _s();\n  const token = localStorage.getItem(\"authToken\");\n  useEffect(() => {\n    fetch(`http://localhost:5000/api/pet/${aid}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => res.json()).then(data => {\n      setPet(data[0]);\n    }).catch(err => console.log(err));\n  }, []);\n}\n_s(getPetDetails, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\nexport default {\n  createPerson,\n  getPetDetails\n};","map":{"version":3,"names":["useEffect","axios","createPerson","e","name","age","salary","password","setname","setage","setsalary","setPassword","setAuthToken","history","preventDefault","parseInt","alert","window","location","reload","newUser","fetch","method","headers","body","JSON","stringify","then","res","json","data","accessToken","localStorage","setItem","catch","err","console","log","getPetDetails","aid","setPet","_s","token","getItem","Authorization"],"sources":["D:/FMI/fmi_an2(SEM2)/MPP/FrontEnd/crud_react/REACT_CRUD/src/hooks/useFetch.js"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nfunction createPerson(e, name, age, salary, password, setname, setage, setsalary, setPassword, setAuthToken, history) {\r\n\te.preventDefault();\r\n\r\n\tif (name === \"\" || age === \"\" || salary === \"\" || parseInt(age) < 0 || parseInt(salary) < 0) {\r\n\t\talert(\"invalid input\");\r\n\t\tsetname(\"\");\r\n\t\tsetage(\"\");\r\n\t\tsetsalary(\"\");\r\n\t\tsetPassword(\"\");\r\n\t\twindow.location.reload();\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst newUser = { name: name, age: age, salary: salary, password: password };\r\n\tfetch(\"http://localhost:5000/auth\", {\r\n\t\tmethod: \"POST\",\r\n\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\tbody: JSON.stringify(newUser),\r\n\t})\r\n\t\t.then(async (res) => res.json())\r\n\t\t.then((data) => {\r\n\t\t\tsetAuthToken(data.accessToken);\r\n\t\t\tlocalStorage.setItem(\"authToken\", data.accessToken);\r\n\t\t\thistory(\"/home\");\r\n\t\t\twindow.location.reload();\r\n\t\t})\r\n\t\t.catch((err) => console.log(err));\r\n\r\n\thistory(\"/home\");\r\n}\r\n\r\nfunction getPetDetails(aid, setPet) {\r\n\tconst token = localStorage.getItem(\"authToken\");\r\n\tuseEffect(() => {\r\n\t\tfetch(`http://localhost:5000/api/pet/${aid}`, {\r\n\t\t\theaders: {\r\n\t\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\t},\r\n\t\t})\r\n\t\t\t.then((res) => res.json())\r\n\t\t\t.then((data) => {\r\n\t\t\t\tsetPet(data[0]);\r\n\t\t\t})\r\n\t\t\t.catch((err) => console.log(err));\r\n\t}, []);\r\n}\r\n\r\nexport default { createPerson, getPetDetails };\r\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,OAAOC,KAAK,MAAM,OAAO;AAEzB,SAASC,YAAYA,CAACC,CAAC,EAAEC,IAAI,EAAEC,GAAG,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,OAAO,EAAEC,MAAM,EAAEC,SAAS,EAAEC,WAAW,EAAEC,YAAY,EAAEC,OAAO,EAAE;EACrHV,CAAC,CAACW,cAAc,CAAC,CAAC;EAElB,IAAIV,IAAI,KAAK,EAAE,IAAIC,GAAG,KAAK,EAAE,IAAIC,MAAM,KAAK,EAAE,IAAIS,QAAQ,CAACV,GAAG,CAAC,GAAG,CAAC,IAAIU,QAAQ,CAACT,MAAM,CAAC,GAAG,CAAC,EAAE;IAC5FU,KAAK,CAAC,eAAe,CAAC;IACtBR,OAAO,CAAC,EAAE,CAAC;IACXC,MAAM,CAAC,EAAE,CAAC;IACVC,SAAS,CAAC,EAAE,CAAC;IACbC,WAAW,CAAC,EAAE,CAAC;IACfM,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC;IACxB;EACD;EAEA,MAAMC,OAAO,GAAG;IAAEhB,IAAI,EAAEA,IAAI;IAAEC,GAAG,EAAEA,GAAG;IAAEC,MAAM,EAAEA,MAAM;IAAEC,QAAQ,EAAEA;EAAS,CAAC;EAC5Ec,KAAK,CAAC,4BAA4B,EAAE;IACnCC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACN,OAAO;EAC7B,CAAC,CAAC,CACAO,IAAI,CAAC,MAAOC,GAAG,IAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CAC/BF,IAAI,CAAEG,IAAI,IAAK;IACflB,YAAY,CAACkB,IAAI,CAACC,WAAW,CAAC;IAC9BC,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEH,IAAI,CAACC,WAAW,CAAC;IACnDlB,OAAO,CAAC,OAAO,CAAC;IAChBI,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC;EACzB,CAAC,CAAC,CACDe,KAAK,CAAEC,GAAG,IAAKC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAAC;EAElCtB,OAAO,CAAC,OAAO,CAAC;AACjB;AAEA,SAASyB,aAAaA,CAACC,GAAG,EAAEC,MAAM,EAAE;EAAAC,EAAA;EACnC,MAAMC,KAAK,GAAGV,YAAY,CAACW,OAAO,CAAC,WAAW,CAAC;EAC/C3C,SAAS,CAAC,MAAM;IACfqB,KAAK,CAAE,iCAAgCkB,GAAI,EAAC,EAAE;MAC7ChB,OAAO,EAAE;QACRqB,aAAa,EAAG,UAASF,KAAM;MAChC;IACD,CAAC,CAAC,CACAf,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEG,IAAI,IAAK;MACfU,MAAM,CAACV,IAAI,CAAC,CAAC,CAAC,CAAC;IAChB,CAAC,CAAC,CACDI,KAAK,CAAEC,GAAG,IAAKC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAAC;EACnC,CAAC,EAAE,EAAE,CAAC;AACP;AAACM,EAAA,CAdQH,aAAa;AAgBtB,eAAe;EAAEpC,YAAY;EAAEoC;AAAc,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}