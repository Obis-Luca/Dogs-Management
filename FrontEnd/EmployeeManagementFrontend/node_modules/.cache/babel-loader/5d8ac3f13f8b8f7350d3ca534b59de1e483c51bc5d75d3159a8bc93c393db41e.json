{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nimport axios from \"axios\";\nfunction createPerson(e, name, age, salary, password, setname, setage, setsalary, setPassword, setAuthToken, history) {\n  e.preventDefault();\n  if (name === \"\" || age === \"\" || salary === \"\" || parseInt(age) < 0 || parseInt(salary) < 0) {\n    alert(\"invalid input\");\n    setname(\"\");\n    setage(\"\");\n    setsalary(\"\");\n    setPassword(\"\");\n    window.location.reload();\n    return;\n  }\n  const newUser = {\n    name: name,\n    age: age,\n    salary: salary,\n    password: password\n  };\n  fetch(\"http://localhost:5000/auth\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(newUser)\n  }).then(async res => res.json()).then(data => {\n    setAuthToken(data.accessToken);\n    localStorage.setItem(\"authToken\", data.accessToken);\n    history(\"/home\");\n    window.location.reload();\n  }).catch(err => console.log(err));\n  history(\"/home\");\n}\nfunction getPetDetails(aid, setPet) {\n  _s();\n  const token = localStorage.getItem(\"authToken\");\n  useEffect(() => {\n    fetch(`http://localhost:5000/api/pet/${aid}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => res.json()).then(data => {\n      setPet(data[0]);\n    }).catch(err => console.log(err));\n  }, []);\n}\n_s(getPetDetails, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\nfunction editPet(e, aid, uid, name, history) {\n  e.preventDefault();\n  const token = localStorage.getItem(\"authToken\");\n  if (uid === \"\" || name === \"\" || parseInt(uid) < 0) {\n    alert(\"Invalid input\");\n    window.location.reload();\n    return;\n  }\n  const updatedPet = {\n    updatedPet: {\n      uid: parseInt(uid),\n      Name: name\n    }\n  };\n  axios.put(`http://localhost:5000/api/pet/${aid}`, updatedPet, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(res => {\n    alert(res.data.message);\n    history(`/person/${uid}`);\n  }).catch(err => {\n    if (err.response) {\n      alert(err.response.data.message);\n    } else {\n      alert(\"An unexpected error occurred\");\n    }\n    history(\"/home\");\n  });\n}\nexport default {\n  createPerson,\n  getPetDetails,\n  createPet,\n  editPet\n};","map":{"version":3,"names":["useEffect","axios","createPerson","e","name","age","salary","password","setname","setage","setsalary","setPassword","setAuthToken","history","preventDefault","parseInt","alert","window","location","reload","newUser","fetch","method","headers","body","JSON","stringify","then","res","json","data","accessToken","localStorage","setItem","catch","err","console","log","getPetDetails","aid","setPet","_s","token","getItem","Authorization","editPet","uid","updatedPet","Name","put","message","response","createPet"],"sources":["D:/FMI/fmi_an2(SEM2)/MPP/FrontEnd/crud_react/REACT_CRUD/src/hooks/useFetch.js"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nfunction createPerson(e, name, age, salary, password, setname, setage, setsalary, setPassword, setAuthToken, history) {\r\n\te.preventDefault();\r\n\r\n\tif (name === \"\" || age === \"\" || salary === \"\" || parseInt(age) < 0 || parseInt(salary) < 0) {\r\n\t\talert(\"invalid input\");\r\n\t\tsetname(\"\");\r\n\t\tsetage(\"\");\r\n\t\tsetsalary(\"\");\r\n\t\tsetPassword(\"\");\r\n\t\twindow.location.reload();\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst newUser = { name: name, age: age, salary: salary, password: password };\r\n\tfetch(\"http://localhost:5000/auth\", {\r\n\t\tmethod: \"POST\",\r\n\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\tbody: JSON.stringify(newUser),\r\n\t})\r\n\t\t.then(async (res) => res.json())\r\n\t\t.then((data) => {\r\n\t\t\tsetAuthToken(data.accessToken);\r\n\t\t\tlocalStorage.setItem(\"authToken\", data.accessToken);\r\n\t\t\thistory(\"/home\");\r\n\t\t\twindow.location.reload();\r\n\t\t})\r\n\t\t.catch((err) => console.log(err));\r\n\r\n\thistory(\"/home\");\r\n}\r\n\r\nfunction getPetDetails(aid, setPet) {\r\n\tconst token = localStorage.getItem(\"authToken\");\r\n\tuseEffect(() => {\r\n\t\tfetch(`http://localhost:5000/api/pet/${aid}`, {\r\n\t\t\theaders: {\r\n\t\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\t},\r\n\t\t})\r\n\t\t\t.then((res) => res.json())\r\n\t\t\t.then((data) => {\r\n\t\t\t\tsetPet(data[0]);\r\n\t\t\t})\r\n\t\t\t.catch((err) => console.log(err));\r\n\t}, []);\r\n}\r\n\r\nfunction editPet(e, aid, uid, name, history) {\r\n\te.preventDefault();\r\n\tconst token = localStorage.getItem(\"authToken\");\r\n\r\n\tif (uid === \"\" || name === \"\" || parseInt(uid) < 0) {\r\n\t\talert(\"Invalid input\");\r\n\t\twindow.location.reload();\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst updatedPet = {\r\n\t\tupdatedPet: { uid: parseInt(uid), Name: name },\r\n\t};\r\n\r\n\taxios\r\n\t\t.put(`http://localhost:5000/api/pet/${aid}`, updatedPet, {\r\n\t\t\theaders: {\r\n\t\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t},\r\n\t\t})\r\n\t\t.then((res) => {\r\n\t\t\talert(res.data.message);\r\n\t\t\thistory(`/person/${uid}`);\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tif (err.response) {\r\n\t\t\t\talert(err.response.data.message);\r\n\t\t\t} else {\r\n\t\t\t\talert(\"An unexpected error occurred\");\r\n\t\t\t}\r\n\t\t\thistory(\"/home\");\r\n\t\t});\r\n}\r\n\r\nexport default { createPerson, getPetDetails, createPet, editPet };\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}